import {Preview, Props} from '@storybook/addon-docs/blocks';
import CardContentDescription from './CardContentDescription';
import CardShell from '~components/molecules/CardShell/CardShell';

# CardContentDescription

Displays a dynamic message on a McGonagall card when a series of conditions have been met.

## Importing ðŸ“¦

You can use this component using one of the following import patterns.

```javascript
import CardContentDescription from '@unitedincome/components/dist/CardContentDescription';
```

```javascript
import {CardContentDescription} from '@unitedincome/components';
```

## Example ðŸš€

<Preview>
  <CardShell
    beforeButton={
      <CardContentDescription
        isValid={true}
        isFetching={false}
        onChange={() => Promise.resolve('Value')}
      >
        The function has validated and I can show now!
      </CardContentDescription>
    }
  />
</Preview>

```javascript
<CardShell
  beforeButton={
    <CardContentDescription
      isValid={true}
      isFetching={false}
      onChange={() => Promise.resolve('Value')}
    >
      The function has validated and I can show now!
    </CardContentDescription>
  }
/>
```

### Validation

The `isValid` prop should be a boolean which determines if the data returned from the `onChange` handler is valid or not. Providing `false` here will cause the component to hide. Any subsequent `onChange` fires will still fire, and the component will come back into view while it's fetching or when this value is `true`.

### Value Checking

The values prop should be an array of values that get passed into the component. If the component detects a change and the `isValid` function returns true it will trigger the provided `onChange` function.

```javascript
const values = [loanTotal, assetTotal];
```

### isFetching

If you're using the data that is returned from `onChange` to validate a McGonnagall card you'll need to assign a `fetchStatus` and `isFetching` prop to the component. This is so the cards validation function will know that the data isn't ready yet when it reads from its prop values.

You can view an example of this below.

```javascript
<CardContentDescription
  values={values}
  onChange={() => Promise.resolve('Value')}
  isFetching={this.state.isFetching}
  fetchStatus={(fetching) => this.setState({isFetching: fetching})}
/>
```

## Props ðŸ”§

<Props of={CardContentDescription} />

## Related âœ¨

- [CardShell](/?path=/story/molecules-cardshell--active)
- [QuestionCard](/?path=/story/simple-organisms-questioncard--active)
- [McGonagall](/?path=/story/templates-mcgonagall--default)
